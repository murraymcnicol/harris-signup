<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harris Weekend Trip - Booking Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        select {
            height: 40px;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }
        .radio-option {
            display: flex;
            align-items: center;
        }
        .radio-option input {
            margin-right: 5px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        .checkbox-group input {
            margin-right: 10px;
        }
        .info-box {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        .accommodation-details {
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        .submit-section {
            margin-top: 30px;
            text-align: center;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 40px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .note {
            font-style: italic;
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
        }
        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
        .loading {
            display: none;
            color: #3498db;
            font-weight: bold;
        }
        .required {
            color: #e74c3c;
        }
        #hidden_iframe {
            display: none;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Harris Weekend Trip Booking Form</h1>
        <div class="info-box">
            <strong>Trip Dates:</strong> Friday 8th May - Monday 11th May 2026<br>
            <strong>Location:</strong> Harris, Outer Hebrides, Scotland
        </div>

        <div id="successMessage" class="success-message">
            Thank you! Your booking has been submitted successfully. You'll receive a confirmation email shortly.
        </div>
        
        <div id="errorMessage" class="error-message">
            There was an error submitting your form. Please try again or contact Murray directly.
        </div>

        <!-- Hidden iframe for form submission -->
        <iframe name="hidden_iframe" id="hidden_iframe"></iframe>

        <!-- Form that submits to Google Apps Script via iframe -->
        <form id="harrisBookingForm" 
              action="https://script.google.com/macros/s/AKfycbyTtopKDDdbHCTFovRB32leEIjgaekPOdhFChzRIoCGHYp1YNfhiVXzSCI8EWc1mpM/exec" 
              method="POST" 
              target="hidden_iframe"
              onsubmit="return submitForm();">
            
            <h2>Personal Information</h2>
            
            <div class="form-group">
                <label for="name">Full Name <span class="required">*</span></label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-group">
                <label for="email">Email Address <span class="required">*</span></label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone">
            </div>

            <h2>Accommodation Preferences</h2>

            <div class="form-group">
                <label for="accommodation">Preferred Accommodation <span class="required">*</span></label>
                <select id="accommodation" name="accommodation" required onchange="updateAccommodationDetails()">
                    <option value="">-- Please select --</option>
                    <option value="drinishader-bunk">Drinishader No.5 - Bunk Room (4 beds)</option>
                    <option value="drinishader-double">Drinishader No.5 - Double Room</option>
                    <option value="ceol-na-mara">Ceol Na Mara - Twin Room</option>
                    <option value="harris-twin">Harris Hotel - Twin Room</option>
                    <option value="harris-double">Harris Hotel - Double Room</option>
                    <option value="harris-single">Harris Hotel - Single Room</option>
                    <option value="hotel-hebrides">Hotel Hebrides - Single Room</option>
                </select>
                <div id="accommodationDetails" class="accommodation-details" style="display: none;"></div>
            </div>

            <!-- Hidden fields to store accommodation details -->
            <input type="hidden" id="accommodationName" name="accommodationName">
            <input type="hidden" id="roomType" name="roomType">

            <div class="form-group">
                <label for="nights">Number of Nights <span class="required">*</span></label>
                <select id="nights" name="nights" required>
                    <option value="">-- Please select --</option>
                    <option value="1">1 night</option>
                    <option value="2">2 nights</option>
                    <option value="3">3 nights (Full weekend)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="checkin">Check-in Date <span class="required">*</span></label>
                <select id="checkin" name="checkin" required>
                    <option value="">-- Please select --</option>
                    <option value="Friday 8th May">Friday 8th May</option>
                    <option value="Saturday 9th May">Saturday 9th May</option>
                    <option value="Sunday 10th May">Sunday 10th May</option>
                </select>
            </div>

            <div class="form-group" id="breakfastOption" style="display: none;">
                <label>Add Breakfast? (£8 per day)</label>
                <select id="breakfastSelect" name="breakfast">
                    <option value="No">No, room only</option>
                    <option value="Yes">Yes, add breakfast (£8/day)</option>
                </select>
            </div>
            
            <!-- Hidden field for breakfast when not Drinishader -->
            <input type="hidden" id="breakfastHidden" name="breakfastHidden" value="">

            <div class="form-group">
                <label for="roomShare">Room Sharing Preference</label>
                <input type="text" id="roomShare" name="roomShare" placeholder="Name of person you'd like to share with (if applicable)">
            </div>

            <h2>St Kilda Boat Trip</h2>
            <div class="info-box">
                <strong>Limited to 12 guests per day</strong><br>
                Visit the UNESCO World Heritage Site of St Kilda - one of the most remote parts of the British Isles
            </div>

            <div class="form-group">
                <label>Would you like to join the St Kilda boat trip? <span class="required">*</span></label>
                <div class="radio-group">
                    <div class="radio-option">
                        <input type="radio" id="boatYes" name="boatTrip" value="yes" onchange="toggleBoatDay()" required>
                        <label for="boatYes" style="font-weight: normal;">Yes</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="boatNo" name="boatTrip" value="no" onchange="toggleBoatDay()" required>
                        <label for="boatNo" style="font-weight: normal;">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group" id="boatDaySelection" style="display: none;">
                <label>Preferred Day for Boat Trip <span class="required">*</span></label>
                <select id="boatDaySelect" name="boatDay">
                    <option value="">-- Please select --</option>
                    <option value="Saturday 9th May">Saturday 9th May</option>
                    <option value="Sunday 10th May">Sunday 10th May</option>
                    <option value="Either day works">Either day works for me</option>
                </select>
            </div>

            <h2>Additional Information</h2>

            <div class="form-group">
                <label for="dietary">Dietary Requirements</label>
                <input type="text" id="dietary" name="dietary" placeholder="Please list any dietary requirements or allergies">
            </div>

            <div class="form-group">
                <label for="comments">Additional Comments</label>
                <textarea id="comments" name="comments" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-family: Arial, sans-serif; font-size: 14px; box-sizing: border-box;" placeholder="Any other information or special requests"></textarea>
            </div>

            <div class="submit-section">
                <button type="submit" id="submitButton">Submit Booking</button>
                <div id="loadingMessage" class="loading">Submitting your booking...</div>
                <p class="note">Your information will be securely submitted to Murray</p>
            </div>
        </form>
    </div>

    <script>
        // IMPORTANT: Replace this with your actual Google Apps Script Web App URL
        const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE';
        
        // Set the form action to the Google Script URL
        window.onload = function() {
            document.getElementById('harrisBookingForm').action = GOOGLE_SCRIPT_URL;
        };
        
        // Accommodation information
        const accommodationInfo = {
            'drinishader-bunk': {
                details: 'Price: £25 per night (room only) • Sleeps 4 • Breakfast available for £8',
                name: 'Drinishader No.5',
                roomType: 'Bunk Room (4 beds)'
            },
            'drinishader-double': {
                details: 'Price: £75 per night (room only) • Sleeps 2 • Breakfast available for £8',
                name: 'Drinishader No.5',
                roomType: 'Double Room'
            },
            'ceol-na-mara': {
                details: 'Price: £225 per night • Twin room • Breakfast included',
                name: 'Ceol Na Mara',
                roomType: 'Twin Room'
            },
            'harris-twin': {
                details: 'Price: £189 per night • Twin room • Breakfast included • 5 rooms available',
                name: 'Harris Hotel',
                roomType: 'Twin Room'
            },
            'harris-double': {
                details: 'Price: £189 per night • Double room • Breakfast included • 6 rooms available',
                name: 'Harris Hotel',
                roomType: 'Double Room'
            },
            'harris-single': {
                details: 'Price: £159 per night • Single room • Breakfast included',
                name: 'Harris Hotel',
                roomType: 'Single Room'
            },
            'hotel-hebrides': {
                details: 'Price: £130 per night • Single room • Breakfast included • 2 rooms available',
                name: 'Hotel Hebrides',
                roomType: 'Single Room'
            }
        };

        function updateAccommodationDetails() {
            const select = document.getElementById('accommodation');
            const details = document.getElementById('accommodationDetails');
            const breakfastOption = document.getElementById('breakfastOption');
            const accommodationName = document.getElementById('accommodationName');
            const roomType = document.getElementById('roomType');
            const breakfastHidden = document.getElementById('breakfastHidden');
            const breakfastSelect = document.getElementById('breakfastSelect');
            
            if (select.value && accommodationInfo[select.value]) {
                // Show accommodation details
                details.innerHTML = accommodationInfo[select.value].details;
                details.style.display = 'block';
                
                // Set hidden fields
                accommodationName.value = accommodationInfo[select.value].name;
                roomType.value = accommodationInfo[select.value].roomType;
                
                // Handle breakfast option
                if (select.value.includes('drinishader')) {
                    breakfastOption.style.display = 'block';
                    breakfastSelect.disabled = false;
                    breakfastHidden.value = '';
                } else {
                    breakfastOption.style.display = 'none';
                    breakfastSelect.disabled = true;
                    breakfastHidden.value = 'Included';
                }
            } else {
                details.style.display = 'none';
                breakfastOption.style.display = 'none';
                accommodationName.value = '';
                roomType.value = '';
                breakfastHidden.value = '';
            }
        }

        function toggleBoatDay() {
            const boatYes = document.getElementById('boatYes').checked;
            const boatDaySelection = document.getElementById('boatDaySelection');
            const boatDaySelect = document.getElementById('boatDaySelect');
            
            if (boatYes) {
                boatDaySelection.style.display = 'block';
                boatDaySelect.required = true;
            } else {
                boatDaySelection.style.display = 'none';
                boatDaySelect.required = false;
                boatDaySelect.value = '';
            }
        }

        function submitForm() {
            // Check if Google Script URL has been set
            if (GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE') {
                alert('Please update the Google Apps Script URL in the JavaScript code before submitting.');
                return false;
            }
            
            // Fix breakfast field
            const accommodation = document.getElementById('accommodation').value;
            const breakfastSelect = document.getElementById('breakfastSelect');
            const breakfastHidden = document.getElementById('breakfastHidden');
            
            if (!accommodation.includes('drinishader')) {
                // For non-Drinishader, ensure breakfast is set to "Included"
                breakfastSelect.name = '';
                breakfastHidden.name = 'breakfast';
            } else {
                // For Drinishader, use the select value
                breakfastSelect.name = 'breakfast';
                breakfastHidden.name = '';
            }
            
            // Fix boat day if not going on trip
            const boatTrip = document.querySelector('input[name="boatTrip"]:checked');
            const boatDaySelect = document.getElementById('boatDaySelect');
            
            if (boatTrip && boatTrip.value === 'no') {
                boatDaySelect.value = 'N/A';
            }
            
            // Show loading message
            document.getElementById('submitButton').disabled = true;
            document.getElementById('loadingMessage').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            
            // Set a timeout to show success message
            setTimeout(function() {
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('submitButton').disabled = false;
                document.getElementById('loadingMessage').style.display = 'none';
                
                // Reset form after a delay
                setTimeout(function() {
                    document.getElementById('harrisBookingForm').reset();
                    document.getElementById('accommodationDetails').style.display = 'none';
                    document.getElementById('breakfastOption').style.display = 'none';
                    document.getElementById('boatDaySelection').style.display = 'none';
                }, 2000);
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 3000);
            
            return true; // Allow form submission
        }
    </script>
</body>
</html>
